<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹æ’­æ”¾æµ‹è¯•</title>
    <style>
        body {
            background: #FFF8DC;
            font-family: Arial, sans-serif;
            padding: 2rem;
            text-align: center;
        }
        .test-btn {
            padding: 1rem 2rem;
            margin: 1rem;
            background: #FF69B4;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
        }
        .status {
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            min-height: 50px;
        }
    </style>
</head>
<body>
    <h1>ğŸµ éŸ³ä¹æ’­æ”¾æµ‹è¯•</h1>
    
    <div class="status" id="status">ç­‰å¾…æµ‹è¯•...</div>
    
    <button class="test-btn" onclick="testAutoplay()">æµ‹è¯•è‡ªåŠ¨æ’­æ”¾</button>
    <button class="test-btn" onclick="testManualPlay()">æ‰‹åŠ¨æ’­æ”¾</button>
    <button class="test-btn" onclick="pauseMusic()">æš‚åœéŸ³ä¹</button>
    <button class="test-btn" onclick="checkAudioFile()">æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶</button>
    
    <audio id="test-audio" preload="auto" loop>
        <source src="assets/audio/happy-birthday.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        const audio = document.getElementById('test-audio');
        const status = document.getElementById('status');
        
        function updateStatus(message) {
            status.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            console.log(message);
        }
        
        function testAutoplay() {
            updateStatus('å°è¯•è‡ªåŠ¨æ’­æ”¾...');
            audio.play().then(() => {
                updateStatus('âœ… è‡ªåŠ¨æ’­æ”¾æˆåŠŸï¼éŸ³ä¹æ­£åœ¨æ’­æ”¾');
            }).catch(e => {
                updateStatus('âŒ è‡ªåŠ¨æ’­æ”¾å¤±è´¥: ' + e.message);
            });
        }
        
        function testManualPlay() {
            updateStatus('æ‰‹åŠ¨æ’­æ”¾éŸ³ä¹...');
            audio.play().then(() => {
                updateStatus('âœ… æ‰‹åŠ¨æ’­æ”¾æˆåŠŸï¼éŸ³ä¹æ­£åœ¨æ’­æ”¾');
            }).catch(e => {
                updateStatus('âŒ æ‰‹åŠ¨æ’­æ”¾å¤±è´¥: ' + e.message);
            });
        }
        
        function pauseMusic() {
            audio.pause();
            updateStatus('â¸ï¸ éŸ³ä¹å·²æš‚åœ');
        }
        
        function checkAudioFile() {
            updateStatus('æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶...');
            
            // æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ˜¯å¦å¯ä»¥åŠ è½½
            const testAudio = new Audio('assets/audio/happy-birthday.mp3');
            testAudio.addEventListener('loadeddata', () => {
                updateStatus(`âœ… éŸ³é¢‘æ–‡ä»¶åŠ è½½æˆåŠŸï¼æ–‡ä»¶æ—¶é•¿: ${Math.round(testAudio.duration)}ç§’`);
            });
            testAudio.addEventListener('error', (e) => {
                updateStatus('âŒ éŸ³é¢‘æ–‡ä»¶åŠ è½½å¤±è´¥: ' + e.message);
            });
            testAudio.load();
        }
        
        // éŸ³é¢‘äº‹ä»¶ç›‘å¬
        audio.addEventListener('loadstart', () => updateStatus('ğŸ”„ å¼€å§‹åŠ è½½éŸ³é¢‘...'));
        audio.addEventListener('loadeddata', () => updateStatus('ğŸ“ éŸ³é¢‘æ•°æ®åŠ è½½å®Œæˆ'));
        audio.addEventListener('canplay', () => updateStatus('â–¶ï¸ éŸ³é¢‘å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥æ’­æ”¾'));
        audio.addEventListener('play', () => updateStatus('ğŸµ éŸ³é¢‘å¼€å§‹æ’­æ”¾'));
        audio.addEventListener('pause', () => updateStatus('â¸ï¸ éŸ³é¢‘æš‚åœ'));
        audio.addEventListener('ended', () => updateStatus('ğŸ”š éŸ³é¢‘æ’­æ”¾ç»“æŸ'));
        audio.addEventListener('error', (e) => updateStatus('âŒ éŸ³é¢‘é”™è¯¯: ' + e.message));
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥
        window.addEventListener('load', () => {
            updateStatus('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹éŸ³é¢‘æ£€æŸ¥');
            checkAudioFile();
        });
    </script>
</body>
</html> 