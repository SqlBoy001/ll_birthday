<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±è±ç”Ÿæ—¥ç½‘é¡µ - æ€§èƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #FFF8DC;
            padding: 2rem;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 2px solid #FF69B4;
            border-radius: 10px;
        }
        .test-result {
            background: #f0f8ff;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
            font-family: monospace;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            margin: 0.5rem 0;
        }
        .good { color: green; }
        .warning { color: orange; }
        .bad { color: red; }
        button {
            background: #FF69B4;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
        }
        button:hover {
            background: #FF1493;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‚ è±è±ç”Ÿæ—¥ç½‘é¡µæ€§èƒ½æµ‹è¯•ä¸­å¿ƒ</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š é¡µé¢æ€§èƒ½æŒ‡æ ‡</h2>
            <button onclick="testPagePerformance()">æµ‹è¯•é¡µé¢æ€§èƒ½</button>
            <div id="page-performance" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¨ ç²’å­ç³»ç»Ÿæ€§èƒ½</h2>
            <button onclick="testParticlePerformance()">æµ‹è¯•ç²’å­æ€§èƒ½</button>
            <div id="particle-performance" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸµ éŸ³é¢‘ç³»ç»Ÿæµ‹è¯•</h2>
            <button onclick="testAudioPerformance()">æµ‹è¯•éŸ³é¢‘åŠŸèƒ½</button>
            <div id="audio-performance" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“± ç§»åŠ¨ç«¯å…¼å®¹æ€§</h2>
            <button onclick="testMobileCompatibility()">æµ‹è¯•ç§»åŠ¨ç«¯</button>
            <div id="mobile-compatibility" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§</h2>
            <button onclick="testBrowserCompatibility()">æµ‹è¯•æµè§ˆå™¨</button>
            <div id="browser-compatibility" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ˆ èµ„æºåŠ è½½æµ‹è¯•</h2>
            <button onclick="testResourceLoading()">æµ‹è¯•èµ„æºåŠ è½½</button>
            <div id="resource-loading" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”— é¡µé¢å¯¼èˆªæµ‹è¯•</h2>
            <button onclick="testPageNavigation()">æµ‹è¯•é¡µé¢è·³è½¬</button>
            <div id="page-navigation" class="test-result"></div>
        </div>
    </div>
    
    <script>
        // é¡µé¢æ€§èƒ½æµ‹è¯•
        function testPagePerformance() {
            const result = document.getElementById('page-performance');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•é¡µé¢æ€§èƒ½...';
            
            setTimeout(() => {
                const navigation = performance.navigation;
                const timing = performance.timing;
                
                const pageLoadTime = timing.loadEventEnd - timing.navigationStart;
                const domReadyTime = timing.domContentLoadedEventEnd - timing.navigationStart;
                const firstPaintTime = performance.getEntriesByType('paint')[0]?.startTime || 0;
                
                const metrics = [
                    { name: 'é¡µé¢åŠ è½½æ—¶é—´', value: `${pageLoadTime}ms`, status: pageLoadTime < 3000 ? 'good' : pageLoadTime < 5000 ? 'warning' : 'bad' },
                    { name: 'DOMå°±ç»ªæ—¶é—´', value: `${domReadyTime}ms`, status: domReadyTime < 2000 ? 'good' : domReadyTime < 3000 ? 'warning' : 'bad' },
                    { name: 'é¦–æ¬¡ç»˜åˆ¶æ—¶é—´', value: `${Math.round(firstPaintTime)}ms`, status: firstPaintTime < 1500 ? 'good' : firstPaintTime < 2500 ? 'warning' : 'bad' },
                    { name: 'å†…å­˜ä½¿ç”¨', value: `${Math.round(performance.memory?.usedJSHeapSize / 1024 / 1024 || 0)}MB`, status: 'good' }
                ];
                
                result.innerHTML = metrics.map(metric => 
                    `<div class="metric">
                        <span>${metric.name}:</span>
                        <span class="${metric.status}">${metric.value}</span>
                    </div>`
                ).join('');
            }, 1000);
        }
        
        // ç²’å­ç³»ç»Ÿæ€§èƒ½æµ‹è¯•
        function testParticlePerformance() {
            const result = document.getElementById('particle-performance');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•ç²’å­ç³»ç»Ÿæ€§èƒ½...';
            
            setTimeout(() => {
                const canvas = document.createElement('canvas');
                canvas.width = 800;
                canvas.height = 600;
                const ctx = canvas.getContext('2d');
                
                let fps = 0;
                let frameCount = 0;
                const startTime = performance.now();
                
                function testFrame() {
                    frameCount++;
                    const currentTime = performance.now();
                    const elapsed = currentTime - startTime;
                    
                    if (elapsed >= 1000) {
                        fps = frameCount;
                        
                        const metrics = [
                            { name: 'å¸§ç‡ (FPS)', value: `${fps}`, status: fps >= 30 ? 'good' : fps >= 20 ? 'warning' : 'bad' },
                            { name: 'æ¸²æŸ“æ—¶é—´', value: `${Math.round(elapsed / frameCount)}ms/å¸§`, status: 'good' },
                            { name: 'Canvasæ”¯æŒ', value: ctx ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ', status: ctx ? 'good' : 'bad' },
                            { name: 'ç¡¬ä»¶åŠ é€Ÿ', value: ctx?.webkitBackingStorePixelRatio ? 'âœ… å¯ç”¨' : 'â“ æœªçŸ¥', status: 'good' }
                        ];
                        
                        result.innerHTML = metrics.map(metric => 
                            `<div class="metric">
                                <span>${metric.name}:</span>
                                <span class="${metric.status}">${metric.value}</span>
                            </div>`
                        ).join('');
                        return;
                    }
                    
                    // æ¨¡æ‹Ÿç²’å­ç»˜åˆ¶
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let i = 0; i < 100; i++) {
                        ctx.beginPath();
                        ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, 5, 0, Math.PI * 2);
                        ctx.fillStyle = '#FF69B4';
                        ctx.fill();
                    }
                    
                    requestAnimationFrame(testFrame);
                }
                
                testFrame();
            }, 500);
        }
        
        // éŸ³é¢‘ç³»ç»Ÿæµ‹è¯•
        function testAudioPerformance() {
            const result = document.getElementById('audio-performance');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•éŸ³é¢‘åŠŸèƒ½...';
            
            setTimeout(() => {
                const audio = document.createElement('audio');
                const audioContext = window.AudioContext || window.webkitAudioContext;
                
                const metrics = [
                    { name: 'HTML5 Audio', value: audio.canPlayType ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ', status: audio.canPlayType ? 'good' : 'bad' },
                    { name: 'MP3æ”¯æŒ', value: audio.canPlayType('audio/mpeg') ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ', status: audio.canPlayType('audio/mpeg') ? 'good' : 'bad' },
                    { name: 'Web Audio API', value: audioContext ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ', status: audioContext ? 'good' : 'bad' },
                    { name: 'è‡ªåŠ¨æ’­æ”¾ç­–ç•¥', value: 'ğŸ” éœ€è¦ç”¨æˆ·äº¤äº’', status: 'warning' }
                ];
                
                result.innerHTML = metrics.map(metric => 
                    `<div class="metric">
                        <span>${metric.name}:</span>
                        <span class="${metric.status}">${metric.value}</span>
                    </div>`
                ).join('');
            }, 800);
        }
        
        // ç§»åŠ¨ç«¯å…¼å®¹æ€§æµ‹è¯•
        function testMobileCompatibility() {
            const result = document.getElementById('mobile-compatibility');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•ç§»åŠ¨ç«¯å…¼å®¹æ€§...';
            
            setTimeout(() => {
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                const isTouch = 'ontouchstart' in window;
                const devicePixelRatio = window.devicePixelRatio || 1;
                const viewport = window.innerWidth + 'x' + window.innerHeight;
                
                const metrics = [
                    { name: 'è®¾å¤‡ç±»å‹', value: isMobile ? 'ğŸ“± ç§»åŠ¨è®¾å¤‡' : 'ğŸ’» æ¡Œé¢è®¾å¤‡', status: 'good' },
                    { name: 'è§¦æ‘¸æ”¯æŒ', value: isTouch ? 'âœ… æ”¯æŒè§¦æ‘¸' : 'âŒ ä¸æ”¯æŒè§¦æ‘¸', status: isTouch ? 'good' : 'warning' },
                    { name: 'åƒç´ å¯†åº¦', value: `${devicePixelRatio}x`, status: devicePixelRatio >= 2 ? 'good' : 'warning' },
                    { name: 'å±å¹•å°ºå¯¸', value: viewport, status: 'good' },
                    { name: 'æ–¹å‘æ”¯æŒ', value: 'orientation' in window ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ', status: 'orientation' in window ? 'good' : 'warning' }
                ];
                
                result.innerHTML = metrics.map(metric => 
                    `<div class="metric">
                        <span>${metric.name}:</span>
                        <span class="${metric.status}">${metric.value}</span>
                    </div>`
                ).join('');
            }, 600);
        }
        
        // æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
        function testBrowserCompatibility() {
            const result = document.getElementById('browser-compatibility');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•æµè§ˆå™¨å…¼å®¹æ€§...';
            
            setTimeout(() => {
                const browser = navigator.userAgent;
                const features = {
                    'CSSåŠ¨ç”»': 'animation' in document.body.style,
                    'CSSå˜æ¢': 'transform' in document.body.style,
                    'CSSæ¸å˜': 'background' in document.body.style,
                    'ES6æ”¯æŒ': typeof Symbol !== 'undefined',
                    'Promiseæ”¯æŒ': typeof Promise !== 'undefined',
                    'Fetch API': typeof fetch !== 'undefined',
                    'Local Storage': typeof localStorage !== 'undefined',
                    'Session Storage': typeof sessionStorage !== 'undefined'
                };
                
                const browserName = getBrowserName(browser);
                
                let featureHtml = `<div class="metric"><span>æµè§ˆå™¨:</span><span class="good">${browserName}</span></div>`;
                
                for (const [feature, supported] of Object.entries(features)) {
                    featureHtml += `<div class="metric">
                        <span>${feature}:</span>
                        <span class="${supported ? 'good' : 'bad'}">${supported ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ'}</span>
                    </div>`;
                }
                
                result.innerHTML = featureHtml;
            }, 700);
        }
        
        // èµ„æºåŠ è½½æµ‹è¯•
        function testResourceLoading() {
            const result = document.getElementById('resource-loading');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•èµ„æºåŠ è½½...';
            
            setTimeout(() => {
                const resources = performance.getEntriesByType('resource');
                const imageResources = resources.filter(r => r.name.includes('.jpg') || r.name.includes('.png') || r.name.includes('.gif'));
                const audioResources = resources.filter(r => r.name.includes('.mp3') || r.name.includes('.wav'));
                const cssResources = resources.filter(r => r.name.includes('.css'));
                const jsResources = resources.filter(r => r.name.includes('.js'));
                
                const totalSize = resources.reduce((sum, r) => sum + (r.transferSize || 0), 0);
                const avgLoadTime = resources.reduce((sum, r) => sum + r.duration, 0) / resources.length;
                
                const metrics = [
                    { name: 'æ€»èµ„æºæ•°', value: `${resources.length}ä¸ª`, status: resources.length < 20 ? 'good' : resources.length < 50 ? 'warning' : 'bad' },
                    { name: 'å›¾ç‰‡èµ„æº', value: `${imageResources.length}ä¸ª`, status: 'good' },
                    { name: 'éŸ³é¢‘èµ„æº', value: `${audioResources.length}ä¸ª`, status: 'good' },
                    { name: 'æ ·å¼è¡¨', value: `${cssResources.length}ä¸ª`, status: 'good' },
                    { name: 'JavaScript', value: `${jsResources.length}ä¸ª`, status: 'good' },
                    { name: 'æ€»ä¼ è¾“å¤§å°', value: `${Math.round(totalSize / 1024)}KB`, status: totalSize < 1024 * 1024 ? 'good' : 'warning' },
                    { name: 'å¹³å‡åŠ è½½æ—¶é—´', value: `${Math.round(avgLoadTime)}ms`, status: avgLoadTime < 100 ? 'good' : avgLoadTime < 300 ? 'warning' : 'bad' }
                ];
                
                result.innerHTML = metrics.map(metric => 
                    `<div class="metric">
                        <span>${metric.name}:</span>
                        <span class="${metric.status}">${metric.value}</span>
                    </div>`
                ).join('');
            }, 900);
        }
        
        // é¡µé¢å¯¼èˆªæµ‹è¯•
        function testPageNavigation() {
            const result = document.getElementById('page-navigation');
            result.innerHTML = 'æ­£åœ¨æµ‹è¯•é¡µé¢å¯¼èˆª...';
            
            setTimeout(() => {
                const pages = [
                    { name: 'ä¸»é¡µé¢', url: 'birthday-solid.html', status: 'unknown' },
                    { name: 'å›å¿†é¡µé¢', url: 'memory-photos.html', status: 'unknown' },
                    { name: 'æŠ½å¥–é¡µé¢', url: 'lottery.html', status: 'unknown' },
                    { name: 'éŸ³ä¹æµ‹è¯•', url: 'music-test.html', status: 'unknown' }
                ];
                
                const testPromises = pages.map(page => {
                    return fetch(page.url, { method: 'HEAD' })
                        .then(response => {
                            page.status = response.ok ? 'good' : 'bad';
                            page.statusText = response.ok ? 'âœ… å¯è®¿é—®' : `âŒ ${response.status}`;
                        })
                        .catch(() => {
                            page.status = 'bad';
                            page.statusText = 'âŒ æ— æ³•è®¿é—®';
                        });
                });
                
                Promise.all(testPromises).then(() => {
                    const metrics = pages.map(page => ({
                        name: page.name,
                        value: page.statusText,
                        status: page.status
                    }));
                    
                    result.innerHTML = metrics.map(metric => 
                        `<div class="metric">
                            <span>${metric.name}:</span>
                            <span class="${metric.status}">${metric.value}</span>
                        </div>`
                    ).join('');
                });
            }, 500);
        }
        
        // è·å–æµè§ˆå™¨åç§°
        function getBrowserName(userAgent) {
            if (userAgent.includes('Chrome')) return 'Google Chrome';
            if (userAgent.includes('Firefox')) return 'Mozilla Firefox';
            if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) return 'Safari';
            if (userAgent.includes('Edge')) return 'Microsoft Edge';
            if (userAgent.includes('Opera')) return 'Opera';
            return 'æœªçŸ¥æµè§ˆå™¨';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª æ€§èƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html> 